{% extends "base.html" %}

{% block title %}MetabolX - Personal Information{% endblock %}

{% block content %}
<div class="min-h-screen py-12">
    <div class="max-w-3xl mx-auto px-4">
        <!-- Form Card -->
        <div class="card">
            <!-- Header -->
            <div class="card-header">
                <h2 class="text-2xl font-semibold">Personal Information</h2>
                <p class="mt-2 text-blue-100 opacity-90">Help us understand you better for accurate analysis</p>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-bar-fill" style="width: 33%;"></div>
                </div>
                <div class="progress-steps">
                    <!-- Step 1 -->
                    <div class="progress-step active">
                        <div class="progress-step-circle active">1</div>
                        <span class="progress-step-text">Personal Info</span>
                    </div>
                    <!-- Step 2 -->
                    <div class="progress-step">
                        <div class="progress-step-circle">2</div>
                        <span class="progress-step-text">Medical History</span>
                    </div>
                    <!-- Step 3 -->
                    <div class="progress-step">
                        <div class="progress-step-circle">3</div>
                        <span class="progress-step-text">Blood Report</span>
                    </div>
                </div>
            </div>

            <!-- Form -->
            <form method="POST" class="p-6 space-y-6">
                <!-- Name -->
                <div class="form-group">
                    <label for="fullName" class="form-label">Full Name</label>
                    <div class="relative">
                        <input type="text" id="fullName" name="fullName" required
                            class="form-input"
                            placeholder="Enter your full name">
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Date of Birth -->
                <div class="form-group">
                    <label for="dateOfBirth" class="form-label">Date of Birth</label>
                    <div class="relative">
                        <input type="date" id="dateOfBirth" name="dateOfBirth" required
                            class="form-input"
                            max="{{ now().strftime('%Y-%m-%d') }}">
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Height and Weight -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label for="height" class="form-label">Height (cm)</label>
                        <div class="relative">
                            <input type="number" id="height" name="height" required min="50" max="300"
                                class="form-input"
                                placeholder="Enter height in cm">
                            <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="weight" class="form-label">Weight (kg)</label>
                        <div class="relative">
                            <input type="number" id="weight" name="weight" required min="20" max="500" step="0.1"
                                class="form-input"
                                placeholder="Enter weight in kg">
                            <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ethnicity and Gender -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="form-group">
                        <label for="ethnicity" class="form-label">Ethnicity</label>
                        <div class="relative">
                            <select id="ethnicity" name="ethnicity" required
                                class="form-input appearance-none">
                                <option value="">Select ethnicity</option>
                                <option value="asian">Asian</option>
                                <option value="african">African</option>
                                <option value="caucasian">Caucasian</option>
                                <option value="hispanic">Hispanic</option>
                                <option value="middleEastern">Middle Eastern</option>
                                <option value="pacificIslander">Pacific Islander</option>
                                <option value="other">Other</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="gender" class="form-label">Gender</label>
                        <div class="relative">
                            <select id="gender" name="gender" required
                                class="form-input appearance-none">
                                <option value="">Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                                <option value="preferNotToSay">Prefer not to say</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-end pt-6">
                    <button type="submit" class="btn btn-primary">
                        Continue
                        <svg class="icon ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                    </button>
                </div>
            </form>
        </div>

        <!-- Help Text -->
        <div class="mt-6 text-center">
            <p class="help-text">
                Need help? <a href="#">Contact our support team</a>
            </p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Form validation and animations
    const form = document.querySelector('form');
    const inputs = form.querySelectorAll('input, select');

    // Add validation classes and animations
    inputs.forEach(input => {
        input.addEventListener('invalid', (e) => {
            e.preventDefault();
            input.classList.add('border-red-500');
            input.closest('.form-group').classList.add('shake');
            setTimeout(() => input.closest('.form-group').classList.remove('shake'), 600);
        });

        input.addEventListener('input', () => {
            input.classList.remove('border-red-500');
        });
    });

    // Date of birth max date
    document.getElementById('dateOfBirth').max = new Date().toISOString().split('T')[0];

    // Add custom animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            75% { transform: translateX(4px); }
        }

        .shake {
            animation: shake 0.3s ease-in-out;
        }

        .form-group {
            transition: all 0.3s ease;
        }

        .form-input:focus {
            transform: scale(1.01);
        }

        .btn:hover .icon {
            transform: translateX(4px);
        }

        /* Custom select styling */
        select.form-input {
            background-image: none;
        }

        /* Custom date input styling */
        input[type="date"]::-webkit-calendar-picker-indicator {
            opacity: 0;
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 2.5rem;
            height: 100%;
            cursor: pointer;
        }

        /* Smooth focus transitions */
        .form-input {
            transition: all 0.2s ease;
        }

        .form-input:focus {
            transform: scale(1.005);
        }

        /* Button press effect */
        .btn:active {
            transform: scale(0.98);
        }
    `;
    document.head.appendChild(style);
</script>
{% endblock %} 